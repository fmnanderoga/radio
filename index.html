<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FM Ñanderoga</title>

<!-- PWA Manifest -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#5fff74">

<!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css?family=Nunito:wght@400;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

<!-- CSS Propio -->
<link rel="stylesheet" href="estilo.css">

<style>
    /* Estilo botón instalación */
    .install-btn {
        padding: 12px 25px;
        font-size: 1.1em;
        font-weight: 700;
        color: #fff;
        background: linear-gradient(90deg, #13af88, #0f8f5a);
        border: none;
        border-radius: 12px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.25);
        cursor: pointer;
        transition: transform 0.2s, box-shadow 0.2s;
    }

    .install-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 12px rgba(0,0,0,0.3);
    }

    /* Mostrar solo en móviles y tablets */
    @media (min-width: 1025px) {
        .install-btn {
            display: none !important;
        }
    }
</style>
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top" 
     style="background-color: rgba(255, 255, 255, 0.979); backdrop-filter: blur(10px); box-shadow: 0 2px 20px rgba(0,0,0,0.4);">
  <div class="container-fluid px-4">
    <a class="navbar-brand d-flex align-items-center" href="#">
      <img src="img/logo (2).png" alt="FM Ñanderoga Logo" class="img-fluid" style="height:50px; margin-right:10px;">
      <span style="color: #000">FM Ñanderoga</span>
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="#">Programas</a></li>
        <li class="nav-item"><a class="nav-link" href="#">Contacto</a></li>
        <li class="nav-item"><a class="nav-link" href="https://isggoya.edu.ar/" target="_blank">ISG</a></li>
      </ul>
    </div>
  </div>
</nav>

<!-- CONTENIDO PRINCIPAL -->
<main class="main-content">
    <div class="radio-player">
        <div class="radio-image">
            <img src="img/logo (2).png" alt="Portada de FM Ñanderoga">
        </div>
        <h1>FM Ñanderoga</h1>
        <h2>106.5</h2>
        <div class="control-row">
            <button class="btn" id="playPause">
                <svg id="iconPlay" viewBox="0 0 64 64"><polygon points="16,12 16,52 52,32"/></svg>
                <svg id="iconPause" viewBox="0 0 64 64" style="display:none;">
                    <rect x="16" y="12" width="10" height="40"/>
                    <rect x="38" y="12" width="10" height="40"/>
                </svg>
            </button>
        </div>
        <div id="status">LIVE</div>
        <div class="volume-container">
            <label for="volume">🔊</label>
            <input type="range" id="volume" class="volume-slider" min="0" max="1" step="0.01" value="0.7">
        </div>
        <audio id="audio"></audio>
    </div>
</main>

<!-- BOTÓN DE INSTALACIÓN -->
<div class="text-center my-3">
    <button id="installBtn" class="install-btn">📲 Instalar App</button>
</div>

<!-- FOOTER -->
<footer style="background-color: rgba(255,255,255,0.8); color: #000; border-top: 2px solid rgba(255,255,255,0.2); padding:30px 0;">
    <div class="container text-center">
        <h5 style="color:#13af88;">FM Ñanderoga</h5>
        <p>Radio socio educativa del ISG</p>
        <div class="footer-logos d-flex justify-content-center gap-3 mt-3">
            <img src="img/logo (2).png" class="footer-logo">
            <img src="img/isg logo.png" class="footer-logo">
        </div>
        <p class="mt-3">&copy; 2025 FM Ñanderoga. Todos los derechos reservados.</p>
        <p>Sitio creado por: <a href="https://petwisearg.github.io/PetWise/" target="_blank" style="color:#13af88;">PetWise Company</a></p>
    </div>
</footer>

<!-- SCRIPTS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="codigo.js"></script>

<!-- Navbar Collapse -->
<script>
  document.querySelectorAll('.navbar-nav .nav-link').forEach(link => {
    link.addEventListener('click', function () {
      const collapseEl = document.getElementById('navbarNav');
      const bsCollapse = bootstrap.Collapse.getInstance(collapseEl);
      if (!bsCollapse) { new bootstrap.Collapse(collapseEl, { toggle: true }); }
      else { bsCollapse.hide(); }
    });
  });
</script>

<!-- Instalación PWA -->
<script>
let deferredPrompt;
const installBtn = document.getElementById("installBtn");

// Detectar si el dispositivo es móvil/tablet
const isMobile = /android|iphone|ipad|ipod/i.test(navigator.userAgent);

// Mostrar el botón solo si es móvil y no está instalada
function updateInstallButton() {
    const isInstalled = window.matchMedia('(display-mode: standalone)').matches 
                    || window.navigator.standalone === true;

    if (isInstalled || !isMobile) {
        installBtn.style.display = "none"; // ocultar si ya instalada o no es móvil
    } else {
        installBtn.style.display = "inline-block"; // mostrar si no instalada
    }
}

window.addEventListener("beforeinstallprompt", (e) => {
    e.preventDefault();
    deferredPrompt = e;
    updateInstallButton();
});

installBtn.onclick = async () => {
    if (deferredPrompt) {
        deferredPrompt.prompt();
        const { outcome } = await deferredPrompt.userChoice;
        deferredPrompt = null;

        if (outcome === "accepted") {
            installBtn.style.display = "none";
        }
    } else if (/iphone|ipad|ipod/i.test(navigator.userAgent)) {
        alert("Para instalar en iPhone:\n1. Tocá el botón 'Compartir' (⬆️)\n2. Elegí 'Agregar a pantalla de inicio'");
    } else {
        alert("Tu navegador no soporta instalación directa.");
    }
};

// Inicializar al cargar
updateInstallButton();
</script>

<!-- Service Worker -->
<script>
if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js')
        .then(() => console.log('Service Worker registrado'))
        .catch(err => console.error(err));
}
</script>

</body>
</html>
