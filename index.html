<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>FM Ñanderoga 106.5 - Radio educativa del ISG</title>
<meta name="description" content="FM Ñanderoga 106.5 - Radio socio educativa del ISG con programas en vivo y contenido educativo.">
<meta name="keywords" content="FM Ñanderoga, radio, ISG, programas, educación, música">

<!-- Open Graph / Facebook -->
<meta property="og:title" content="FM Ñanderoga 106.5 - Radio educativa del ISG">
<meta property="og:description" content="Radio socio educativa del ISG con programas en vivo y contenido educativo.">
<meta property="og:image" content="https://fmnanderoga.netlify.app/img/logo (2).png">
<meta property="og:url" content="https://fmnanderoga.netlify.app/">
<meta property="og:type" content="website">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="FM Ñanderoga 106.5 - Radio educativa del ISG">
<meta name="twitter:description" content="Radio socio educativa del ISG con programas en vivo y contenido educativo.">
<meta name="twitter:image" content="https://fmnanderoga.netlify.app/img/logo (2).png">

<!-- PWA -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#5fff74">

<!-- Favicon -->
<link rel="icon" href="img/logo (2).png" type="image/png">
<link rel="apple-touch-icon" href="img/logo (2).png">

<!-- Estilos y fuentes -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Nunito:wght@400;800&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
<link rel="stylesheet" href="estilo.css">

<style>
/* Botón instalar */
.install-btn {
    padding: 12px 25px;
    font-size: 1.1em;
    font-weight: 700;
    color: #fff;
    background: linear-gradient(90deg, #13af88, #0f8f5a);
    border: none;
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0,0,0,0.25);
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
}
.install-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(0,0,0,0.3);
}
@media (min-width: 1025px) {
    .install-btn { display: none !important; }
}

/* Navbar hover */
.nav-link:hover { color: rgb(66, 190, 17); }

/* Notificación normal: se mantiene igual que antes */
#notificacion-bar {
    display: none; /* no ocupa espacio cuando no aparece */
    position: fixed;
    top: 70px;
    left: 50%;
    transform: translateX(-50%);
    max-width: 600px;
    width: 90%;
    background: linear-gradient(135deg, #13af88, #0f8f5a);
    color: #fff;
    padding: 15px 20px;
    border-radius: 12px;
    box-shadow: 0 6px 15px rgba(0,0,0,0.3);
    font-family: 'Nunito', sans-serif;
    font-size: 1rem;
    z-index: 9999;
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    animation: slideDown 0.5s forwards;
}

.notificacion-contenido {
    display: flex;
    flex-direction: column;
}

.notificacion-titulo {
    font-size: 0.8rem;
    font-weight: 700;
    color: rgba(255,255,255,0.9);
    margin-bottom: 5px;
}

.cerrar-btn {
    background: transparent;
    border: none;
    color: #fff;
    font-size: 1.2rem;
    cursor: pointer;
}

/* Notificación de programa: centrada y ocupa espacio solo cuando aparece */
#notificacion-programa-bar {
    display: none; /* solo aparece cuando se activa */
    max-width: 600px;
    width: 90%;
    margin: 15px auto 30px auto; /* arriba 15px, abajo 30px */
    background: #fcd452;
    color: #0c0c0c;
    padding: 12px 20px;
    border-color: #000;
    border-radius: 12px;
    font-family: 'Nunito', sans-serif;
    font-size: 1rem;
    box-shadow: 0 6px 15px rgba(0,0,0,0.3);
    display: flex;
    justify-content: center; /* texto centrado */
    align-items: center;
    position: relative;
    gap: 10px;
}

#notificacion-programa-bar span {
    text-align: center;
    flex: 1; /* ocupa todo el ancho disponible */
}


#notificacion-bar,
#notificacion-programa-bar {
    display: none; /* ocultas por defecto */
}

</style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-light fixed-top" 
     style="background-color: rgba(255, 255, 255, 0.979); backdrop-filter: blur(10px); box-shadow: 0 2px 20px rgba(0,0,0,0.4);">
  <div class="container-fluid px-4">
    <a class="navbar-brand d-flex align-items-center" href="#">
      <img src="img/logo (2).png" alt="FM Ñanderoga Logo" style="height:50px; margin-right:10px;">
      <span style="color: #000">FM Ñanderoga</span>
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="programas.html">Programas</a></li>
        <li class="nav-item"><a class="nav-link" href="top10.html">Música</a></li>
        <li class="nav-item"><a class="nav-link" href="contacto.html">Contacto</a></li>
        <li class="nav-item"><a class="nav-link" href="https://isggoya.edu.ar/" target="_blank">ISG</a></li>
        <li class="nav-item"><a class="nav-link" href="img/qr radio fm.png" target="_blank">QR</a></li>
      </ul>
    </div>
  </div>
</nav>

<!-- Notificación -->
<div id="notificacion-bar">
    <div class="notificacion-contenido">
        <span class="notificacion-titulo">FM Ñanderoga</span>
        <span id="notificacion-texto"></span>
    </div>
    <button id="cerrarNotificacion" class="cerrar-btn">&times;</button>
</div>

<main class="main-content d-flex flex-column align-items-center">
    <div class="radio-player mb-3">
        <div class="radio-image">
            <img src="img/logo (2).png" alt="Portada de FM Ñanderoga">
        </div>
        <h1>FM Ñanderoga</h1>
        <h2>106.5</h2>
        <div class="control-row">
            <button class="btn" id="playPause">
                <svg id="iconPlay" viewBox="0 0 64 64"><polygon points="16,12 16,52 52,32"/></svg>
                <svg id="iconPause" viewBox="0 0 64 64" style="display:none;">
                    <rect x="16" y="12" width="10" height="40"/>
                    <rect x="38" y="12" width="10" height="40"/>
                </svg>
            </button>
        </div>
        <div id="status">LIVE</div>
        <div class="volume-container">
            <label for="volume">🔊</label>
            <input type="range" id="volume" class="volume-slider" min="0" max="1" step="0.01" value="0.7">
        </div>
        <audio id="audio"></audio>
    </div>

    <button id="installBtn" class="install-btn mb-3">Instalar App</button>
</main>

<center>
<!-- Notificación de Programa -->
<div id="notificacion-programa-bar">
    <span id="notificacion-programa-texto">Programa comienza en: 00:00</span>
    <button id="cerrarNotificacionPrograma" class="cerrar-btn">&times;</button>
</div>

</center>
<footer style="background-color: rgba(255,255,255,0.8); color: #000; border-top: 2px solid rgba(255,255,255,0.2); padding:30px 0;">
    <div class="container text-center">
        <h5 style="color:#13af88;">FM Ñanderoga</h5>
        <p>Radio socio educativa del ISG</p>
        <div class="footer-logos d-flex justify-content-center gap-3 mt-3">
            <img src="img/logo (2).png" class="footer-logo">
            <img src="img/isg logo.png" class="footer-logo">
        </div>
        <p class="mt-3">&copy; 2025 FM Ñanderoga. Todos los derechos reservados.</p>
        <p>Sitio creado por: <a href="https://petwisearg.github.io/PetWise/" target="_blank" style="color:#13af88;">Arce Lautaro</a></p>
    </div>
</footer>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyCGve3UBqB95lpKC19HQOyiUq7WjZg22IA",
    authDomain: "fm-nanderoga-e3e68.firebaseapp.com",
    databaseURL: "https://fm-nanderoga-e3e68-default-rtdb.firebaseio.com",
    projectId: "fm-nanderoga-e3e68",
    storageBucket: "fm-nanderoga-e3e68.firebasestorage.app",
    messagingSenderId: "888936894327",
    appId: "1:888936894327:web:5e2d8c7c20188dbf391b72",
    measurementId: "G-6QW100YFH7"
  };
  firebase.initializeApp(firebaseConfig);
  const database = firebase.database();
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="codigo.js"></script>

<script>
// Navbar collapse mobile
document.querySelectorAll('.navbar-nav .nav-link').forEach(link => {
    link.addEventListener('click', function () {
      const collapseEl = document.getElementById('navbarNav');
      const bsCollapse = bootstrap.Collapse.getInstance(collapseEl);
      if (!bsCollapse) { new bootstrap.Collapse(collapseEl, { toggle: true }); }
      else { bsCollapse.hide(); }
    });
});
// Obtener referencias
const navbarCollapse = document.getElementById('navbarNav');
const bsCollapse = new bootstrap.Collapse(navbarCollapse, { toggle: false }); // no abre al iniciar
const navbarToggler = document.querySelector('.navbar-toggler');

// Función para cerrar navbar al tocar fuera
function handleClickOutsideNavbar(e) {
  // Solo para pantallas móviles/tablet
  if (window.innerWidth <= 1024) {
    // Si el menú está abierto y el click NO está dentro del menú ni en el toggler
    if (navbarCollapse.classList.contains('show') &&
        !navbarCollapse.contains(e.target) &&
        !navbarToggler.contains(e.target)) {
      bsCollapse.hide();
    }
  }
}

// Agregar listener
document.addEventListener('click', handleClickOutsideNavbar);

// PWA Install
let deferredPrompt;
const installBtn = document.getElementById("installBtn");
const isMobile = /android|iphone|ipad|ipod/i.test(navigator.userAgent);

function updateInstallButton() {
    const isInstalled = window.matchMedia('(display-mode: standalone)').matches 
                    || window.navigator.standalone === true;
    if (isInstalled || !isMobile) installBtn.style.display = "none";
    else installBtn.style.display = "inline-block";
}

window.addEventListener("beforeinstallprompt", (e) => {
    e.preventDefault();
    deferredPrompt = e;
    updateInstallButton();
});

installBtn.onclick = async () => {
    if (deferredPrompt) {
        deferredPrompt.prompt();
        const { outcome } = await deferredPrompt.userChoice;
        deferredPrompt = null;
        if (outcome === "accepted") installBtn.style.display = "none";
    } else if (/iphone|ipad|ipod/i.test(navigator.userAgent)) {
        alert("Para instalar en iPhone:\n1. Tocá el botón 'Compartir' (⬆️)\n2. Elegí 'Agregar a pantalla de inicio'");
    } else {
        alert("Tu navegador no soporta instalación directa.");
    }
};

updateInstallButton();

// Service Worker
if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js')
        .then(reg => console.log('Service Worker registrado', reg))
        .catch(err => console.log('Error SW:', err));
    });
}
</script>

</body>
</html>
